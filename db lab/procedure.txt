create or replace procedure taxCal(empno in number)
is
 v_salary number;
 v_tax number;
begin 
 select salary into v_salary from employee where emp_id=empno;
 if v_salary<100000 then
  v_tax:=0;
elsif v_salary>=100000 and v_salary<150000 then
  v_tax:=0.1*(v_salary-100000);
elsif v_salary>=150000 and v_salary<200000 then
   v_tax:=0.2*(v_salary-100000);
else 
   v_tax:=0.3*(v_salary-100000);
end if;
dbms_output.put_line('Taxable amount is '||v_tax);

end;
/

declare
  empid number:=&Employee_id;
begin
  taxCal(empid);
end;
/


(b)

create or replace procedure hosp(docId in number)
is
  v_count number:=0;

begin
for x in 
  (SELECT P.Patient_ID, 
           P.Patient_Name, 
           T.Treatment_Cost
    FROM Treatment T
    JOIN Appointment A ON T.App_Id = A.App_Id
    JOIN Patient P ON A.Patient_Id = P.Patient_Id
    JOIN Doctor D ON A.Doctor_Id = D.Doctor_Id
    WHERE D.Doctor_ID= docId

  )
  loop
    dbms_output.put_line('Patient ID: '||x.Patient_ID);
    v_count:=v_count+1;
    end loop;
  if v_count=0 then
    dbms_output.put_line('no patients');
  end if;
END;
/
DECLARE
  doc_id int := '&Doctor_ID';
BEGIN
  hosp(doc_id);
END;
/


(c)
create or replace procedure allItems(orderId in number)
is
begin
  dbms_output.put_line('Items in Order ID '||orderID);
  for x in 
  (select itemname 
  from  item I
  join  order_item O ON I.itemno=O.itemno 
  join cust_order C ON C.orderno=O,orderno 
  where C.orderno=orderId)
  loop
    dbms_output.put_line(x.itemname);
  end loop;

  exception
  when no_data_found then
    dbms_output.put_line('No items found');
end;
/
  